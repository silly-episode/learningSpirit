<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.boot.learningspirit.dao.QuestionBankDao">

    <resultMap type="com.boot.learningspirit.entity.QuestionBank" id="QuestionBankMap">
        <result property="questionId" column="question_id" jdbcType="INTEGER"/>
        <result property="subjectKind" column="subject_kind" jdbcType="VARCHAR"/>
        <result property="questionKind" column="question_kind" jdbcType="VARCHAR"/>
        <result property="content" column="content" jdbcType="VARCHAR"/>
        <result property="choice" column="choice" jdbcType="VARCHAR"/>
        <result property="answer" column="answer" jdbcType="VARCHAR"/>
        <result property="questionCreateTime" column="question_create_time" jdbcType="TIMESTAMP"/>
        <result property="orderId" column="order_id" jdbcType="INTEGER"/>
        <result property="module" column="module" jdbcType="VARCHAR"/>
        <result property="moduleId" column="module_id" jdbcType="INTEGER"/>
        <result property="uploadId" column="upload_id" jdbcType="VARCHAR"/>
    </resultMap>

    <!-- 批量插入 -->
    <insert id="insertBatch" keyProperty="questionId" useGeneratedKeys="true">
        insert into learningspirit.question_bank(subject_kind, question_kind, content, choice, answer,
        question_create_time, order_id, module, module_id, upload_id)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.subjectKind}, #{entity.questionKind}, #{entity.content}, #{entity.choice}, #{entity.answer},
            #{entity.questionCreateTime}, #{entity.orderId}, #{entity.module}, #{entity.moduleId}, #{entity.uploadId})
        </foreach>
    </insert>
    <!-- 批量插入或按主键更新 -->
    <insert id="insertOrUpdateBatch" keyProperty="questionId" useGeneratedKeys="true">
        insert into learningspirit.question_bank(subject_kind, question_kind, content, choice, answer,
        question_create_time, order_id, module, module_id, upload_id)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.subjectKind}, #{entity.questionKind}, #{entity.content}, #{entity.choice}, #{entity.answer},
            #{entity.questionCreateTime}, #{entity.orderId}, #{entity.module}, #{entity.moduleId}, #{entity.uploadId})
        </foreach>
        on duplicate key update
        subject_kind = values(subject_kind) , question_kind = values(question_kind) , content = values(content) , choice
        = values(choice) , answer = values(answer) , question_create_time = values(question_create_time) , order_id =
        values(order_id) , module = values(module) , module_id = values(module_id) , upload_id = values(upload_id)
    </insert>

</mapper>

